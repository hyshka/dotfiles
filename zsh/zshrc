#
# User configuration sourced by interactive shells
#

# Source zim
if [[ -s ${ZDOTDIR:-${HOME}}/.zim/init.zsh ]]; then
  source ${ZDOTDIR:-${HOME}}/.zim/init.zsh
fi

# Base16 Shell
BASE16_SHELL="$HOME/.config/base16-shell/base16-railscasts.dark.sh"
[[ -s $BASE16_SHELL ]] && source $BASE16_SHELL

# enable command completion
autoload -Uz compinit
compinit
# autocompletion of command line switches for aliases
#setopt COMPLETE_ALIASES

# Calling nvm use automatically in a directory with a .nvmrc file
autoload -U add-zsh-hook
load-nvmrc() {
  if [[ -f .nvmrc && -r .nvmrc ]]; then
    nvm use
  fi
}
add-zsh-hook chpwd load-nvmrc

# term keybinds
bindkey -v

# shortcuts
alias ...='../..'
alias ....='../../..'
alias .....='../../../..'
alias sx=startx
alias vi=vim
alias t=tmux

# custom commands
alias xev="xev | grep -A2 --line-buffered '^KeyRelease' | sed -n '/keycode /s/^.*keycode \([0-9]*\).* (.*, \(.*\)).*$/\1 \2/p'"
alias xClass="xprop | grep WM_CLASS"
alias srvup="sudo systemctl start httpd mysqld"
alias srvdown="sudo systemctl stop httpd mysqld"
alias zshrc="vim ~/.zshrc && source ~/.zshrc"
alias i3conf="vim ~/.config/i3/config"
alias xres="vim ~/.Xresources && xrdb ~/.Xresources"
alias dhcpeth="sudo systemctl restart dhcpcd@enp0s31f6"
alias chromiumcors="chromium --disable-web-security --user-data-dir=$HOME/.config/chromium-dev &"
alias timer="/opt/activecollab-timer/activecollab-timer &"
alias ytced="PROJECT='ytced' tmuxp load ~/.config/tmuxp/docker-project.yaml"

# wine
alias win32="WINEARCH=win32 WINEPREFIX=~/win32"
alias win64="WINEPREFIX=~/win64"

# django-admin.py
alias dja=django-admin.py
alias djr='django-admin.py runserver'
alias djrp='django-admin.py runserver_plus'
alias djr2='django-admin.py runserver 127.0.0.1:8080'
alias djm='django-admin.py migrate'
alias djmm='django-admin.py makemigrations'
alias djs='django-admin.py syncdb'
alias djsh='django-admin.py shell'
alias djshp='django-admin.py shell_plus'

# manage.py
alias pm="python manage.py"
alias pmr="python manage.py runserver"
alias pmrp='python manage.py runserver_plus'
alias pmr2='python manage.py runserver 127.0.0.1:8080'
alias pmm='python manage.py migrate'
alias pms='python manage.py syncdb'
alias pmsh='python manage.py shell'
alias pmshp='python manage.py shell_plus'

# pip
alias pipi="pip install"
alias pipu="pip uninstall"
alias pipf="pip freeze"
alias pipfg="pip freeze | grep"

# yaourt
alias ya="yaourt --nameonly --pager --color"
alias yau="yaourt --nameonly --pager --color -Syua"
alias yas="yaourt --nameonly --pager --color -Ss"
alias yai="yaourt --nameonly --pager --color -Sy"

# git shortcuts
alias gch="git cherry-pick"
alias gcA="git commit --amend --no-edit"

# npm shortcuts that only list top-level modules
# ! overrides the line-number utility
alias ng="npm list -g --depth=0 2>/dev/null"
alias nl="npm list --depth=0 2>/dev/null"

# nvm
alias n10="nvm use 0.10"
alias n4="nvm use 4"
alias n5="nvm use 5"
alias n6="nvm use 6"

# rvm
alias r1="rvm use 1.9.3"

# calc function
#calc(){awk "BEGIN{ print $* }";}

# bc - An arbitrary precision calculator language
function = 
{
  echo "$@" | bc -l
}

alias calc="="

# docker functions
dfpo () {
    if [ -z "$2" ]
    then
        port=$(docker inspect --format='{{(index (index .NetworkSettings.Ports "8000/tcp") 0).HostPort}}' $1)
    else
        port=$(docker inspect --format='{{(index (index .NetworkSettings.Ports "'$2'/tcp") 0).HostPort}}' $1)
    fi
    chromium 'http://localhost:'"$port" &
}

tlo () {
    if [ -z "$1" ]
    then
        print This command requires an argument. Ex. tpo [projectname]
    else
        print $1
        PROJECT=$1 tmuxp load ~/.config/tmuxp/docker-project.yaml
    fi
}
